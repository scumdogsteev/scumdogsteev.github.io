<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Steve Myles > Lognormality > Survey Analysis in R with the Likert and NPS Packages</title>
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="Steve Myles, some guy from Texas">
    <meta name="author" content="Steve Myles">
    <link rel="canonical" href="https://s.mylesandmyles.info/blog/2017/11/25/survey-analysis/">
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">
	<link rel="icon" type="image/png" href="https://s.mylesandmyles.info/img/favicon-32x32.png" sizes="32x32" />
	<link rel="icon" type="image/png" href="https://s.mylesandmyles.info/img/favicon-16x16.png" sizes="16x16" />
    <!-- Custom CSS & Bootstrap Core CSS - Uses Bootswatch Flatly Theme: http://bootswatch.com/flatly/ -->
    <link rel="stylesheet" href="/style.css">

    <!-- Google verification -->
    <meta name="google-site-verification" content="v249ifvo2RPEG6ai3LJgSAG7PRDntewxOW37aBgrhZY">

    <!-- Bing Verification -->
    

	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-15892472-10', 'auto');
		ga('send', 'pageview');
	</script>

    <!-- Custom Fonts -->
    <link rel="stylesheet" href="/css/font-awesome/css/font-awesome.min.css">
    <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>


    <body id="page-top" class="index">
       <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
				<a class="navbar-brand" href="https://s.mylesandmyles.info/#page-top">Steve Myles</a>
				
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
				<ul class="nav navbar-nav navbar-right">
                    
					<li class="hidden">
                        <a href="https://s.mylesandmyles.info/#page-top"></a>
                    </li>
                    <li class="page-scroll">
                        <a href="https://s.mylesandmyles.info/#about">About</a>
                    </li>
					<li class="page-scroll">
                        <a href="https://s.mylesandmyles.info/#experience">Experience</a>
                    </li>					
                    <li class="page-scroll">
                        <a href="https://s.mylesandmyles.info/#projects">Projects</a>
                    </li>
                    <li class="page-scroll">
                        <a href="https://s.mylesandmyles.info/#talks">Talks</a>
                    </li>
					
                    <li class="page-scroll">
                        <a href="/blog/" style="background-color:#57565e;">Blog</a>
                    </li>
                    <li class="page-scroll">
                        <a href="https://steve.mylesandmyles.info/">Tumblr</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>


		<section id="post">
        <div class="container">
		<br /><br /><br /><br /><br />
		<div class="row">
            <div class="col-lg-12">
				<h2><a style="color:#39383d;" href="https://s.mylesandmyles.info/blog/">Lognormality</a></h2>
                <hr class="star-primary">
				<p align="center"><a href="https://s.mylesandmyles.info/blog/archive/">Archive</a></p>
			</div>
		</div>

		<br /><br />
            <div class="row">
                <div class="col-lg-12">
                    <h3>Survey Analysis in R with the Likert and NPS Packages</h3>
                    <hr class="star-primary">
                    <p align="center">
						25 November 2017  | <a href="https://s.mylesandmyles.info//blog/2017/11/25/survey-analysis/#disqus_thread" data-disqus-identifier="" class="page-scroll"></a> | 
						categories: <a href="https://s.mylesandmyles.info/blog/rstats/">rstats</a>, <a href="https://s.mylesandmyles.info/blog/visualization/">visualization</a>
					</p>
                </div>
                </div>
			<div class="row">
                <div class="col-lg-12">
					<br />
					
					<br />
					<p><strong>Navigate:</strong>  [ <a href="#background">background</a> ] | [ <a href="#data">survey data</a> ] | [ <a href="#analysis">analysis</a> ] | [ 
<a href="#sat">satisfaction analysis</a> ] | [ <a href="#rec">recommendation analysis</a> ] | [ <a href="#summary">summary</a> ] <br /> [ <a href="https://github.com/scumdogsteev/scumdogsteev.github.io/blob/master/_source/_posts_Rmd/2017-11-25-survey-analysis.Rmd">Rmd source for this post</a> ]</p>

<hr />

<p><a name="background"></a>
-[ <strong>background</strong> ]-</p>

<p>Recently, I did a survey analysis as part of my board service for <a href="http://www.ttuyoungguns.com/">Young Guns</a>.  I 
wanted to end up with something along the lines of the picture 
<a href="https://www.tableau.com/solutions/survey-analysis">here</a>.  In case it might help someone else, here’s how I 
approximated this in R.  Thankfully, there are some great packages that facilitated this 
(<a href="http://jason.bryer.org/likert/">likert</a> and <a href="https://CRAN.R-project.org/package=NPS">NPS</a>).</p>

<p>This post:</p>

<ul>
  <li>does not cover how to create or deliver a survey
    <ul>
      <li><a href="https://www.google.com/forms/about/">Google Forms</a> and <a href="https://www.surveymonkey.com/">SurveyMonkey</a> offer
free platforms that allow for survey setup/delivery within minutes
        <ul>
          <li><a href="https://www.techrepublic.com/blog/google-in-the-enterprise/use-google-forms-to-create-a-survey/">this 
guide</a> can 
get you started with a Google Forms survey</li>
        </ul>
      </li>
      <li>both output to formats that are straightforward to import into R</li>
    </ul>
  </li>
  <li>provides a simple example that might help you along</li>
  <li>is not a comprehensive guide</li>
  <li>assumes you’re working with numeric (ordinal) survey data and <em>does not cover text mining or sentiment analysis</em></li>
  <li>quite possibly includes code that could be optimized
    <ul>
      <li>if you have suggestions for optimizing the code, please <a href="#comments">leave a comment</a> and let me know so I can 
update the post</li>
    </ul>
  </li>
</ul>

<p><a name="data"></a>
-[ <strong>survey data</strong> ]-</p>

<p>First, you’ll need survey data.  I assume that if you’re planning to analyze a survey, you’ve already conducted 
one. I also assume that you know how to import data into R. (If not, <a href="https://www.r-bloggers.com/importing-data-to-r/">this is a good resource</a>.)</p>

<p>Here’s an example survey of 10 questions (5 related to satisfaction and 5 measuring likelihood to recommend) for 
various aspects of XYZ Corp’s business.  All questions are on an 11-point 
<a href="https://en.wikipedia.org/wiki/Likert_scale">Likert scale</a> where 0 is the worst response and 10 is the best.</p>

<ol>
  <li>Satisfaction Question #1</li>
  <li>Satisfaction Question #2</li>
  <li>Satisfaction Question #3</li>
  <li>Satisfaction Question #4</li>
  <li>Satisfaction Question #5</li>
  <li>Recommendation Question #1</li>
  <li>Recommendation Question #2</li>
  <li>Recommendation Question #3</li>
  <li>Recommendation Question #4</li>
  <li>Recommendation Question #5</li>
</ol>

<p>For the purposes of this post, I’m assuming your survey results have already been imported into an R data frame.</p>

<p>In this example, I’ve randomly generated 1,000 survey responses to each of the above 10 questions using the
<a href="http://s.mylesandmyles.info/mlsjunkgen/">mlsjunkgen package</a> (I may be biased in my choice of RNG).
I have arbitrarily chosen 1, 9, 2, and 3 as the seeds:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">require</span><span class="p">(</span><span class="n">mlsjunkgen</span><span class="p">)</span><span class="w">
</span><span class="n">survey_data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.data.frame</span><span class="p">(</span><span class="n">mlsjunkgenm</span><span class="p">(</span><span class="m">1000</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">9</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">10</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>Here are the first few responses:</p>

<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;"> V1 </th>
   <th style="text-align:right;"> V2 </th>
   <th style="text-align:right;"> V3 </th>
   <th style="text-align:right;"> V4 </th>
   <th style="text-align:right;"> V5 </th>
   <th style="text-align:right;"> V6 </th>
   <th style="text-align:right;"> V7 </th>
   <th style="text-align:right;"> V8 </th>
   <th style="text-align:right;"> V9 </th>
   <th style="text-align:right;"> V10 </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 10 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 2 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 4 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 5 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 10 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 5 </td>
  </tr>
</tbody>
</table>

<p>Of course, this assumes that all respondents answered all questions.  <a href="https://www.surveymonkey.com/curiosity/survey_completion_times/">That is fairly 
unlikely</a>, so I’ve randomly replaced an arbitrary
7.5% of responses with NAs based on <a href="https://stackoverflow.com/questions/27454265/r-randomly-insert-nas-into-dataframe-proportionaly">this stackoverflow
response</a>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">survey_data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.data.frame</span><span class="p">(</span><span class="n">lapply</span><span class="p">(</span><span class="n">survey_data</span><span class="p">,</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">cc</span><span class="p">)</span><span class="w"> </span><span class="n">cc</span><span class="p">[</span><span class="w"> </span><span class="n">sample</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">),</span><span class="w"> </span><span class="n">prob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">0.925</span><span class="p">,</span><span class="w"> </span><span class="m">0.075</span><span class="p">),</span><span class="w"> 
                                                                         </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">cc</span><span class="p">),</span><span class="w"> </span><span class="n">replace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w"> </span><span class="p">]))</span><span class="w">
</span></code></pre></div></div>

<p>Here are the first few responses again:</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;"> V1 </th>
   <th style="text-align:right;"> V2 </th>
   <th style="text-align:right;"> V3 </th>
   <th style="text-align:right;"> V4 </th>
   <th style="text-align:right;"> V5 </th>
   <th style="text-align:right;"> V6 </th>
   <th style="text-align:right;"> V7 </th>
   <th style="text-align:right;"> V8 </th>
   <th style="text-align:right;"> V9 </th>
   <th style="text-align:right;"> V10 </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 10 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 2 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 4 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 5 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 10 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 5 </td>
  </tr>
</tbody>
</table>

<p>Now, I’ve given the columns descriptive names:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">names</span><span class="p">(</span><span class="n">survey_data</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Satisfaction Q1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Satisfaction Q2"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Satisfaction Q3"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Satisfaction Q4"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Satisfaction Q5"</span><span class="p">,</span><span class="w">
               </span><span class="s2">"Recommendation Q1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Recommendation Q2"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Recommendation Q3"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Recommendation Q4"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Recommendation Q5"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;"> Satisfaction Q1 </th>
   <th style="text-align:right;"> Satisfaction Q2 </th>
   <th style="text-align:right;"> Satisfaction Q3 </th>
   <th style="text-align:right;"> Satisfaction Q4 </th>
   <th style="text-align:right;"> Satisfaction Q5 </th>
   <th style="text-align:right;"> Recommendation Q1 </th>
   <th style="text-align:right;"> Recommendation Q2 </th>
   <th style="text-align:right;"> Recommendation Q3 </th>
   <th style="text-align:right;"> Recommendation Q4 </th>
   <th style="text-align:right;"> Recommendation Q5 </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 10 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 2 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 4 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 5 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 10 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 5 </td>
  </tr>
</tbody>
</table>

<p>This now looks more like real survey data.</p>

<p><a name="analysis"></a>
-[ <strong>analysis</strong> ]-</p>

<p>Now that I have data, I can begin the analysis.</p>

<p>First, I’ve determined the number of responses and the average score for each question:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## calculate number of responses</span><span class="w">
</span><span class="n">num_responses</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sapply</span><span class="p">(</span><span class="n">survey_data</span><span class="p">,</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span><span class="w">

</span><span class="c1">## calculate the avg. of non-na rows for each question</span><span class="w">
</span><span class="n">avg</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">colMeans</span><span class="p">(</span><span class="n">survey_data</span><span class="p">,</span><span class="w"> </span><span class="n">na.rm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>Here is a summary so far:</p>

<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:left;"> Satisfaction Q1 </th>
   <th style="text-align:left;"> Satisfaction Q2 </th>
   <th style="text-align:left;"> Satisfaction Q3 </th>
   <th style="text-align:left;"> Satisfaction Q4 </th>
   <th style="text-align:left;"> Satisfaction Q5 </th>
   <th style="text-align:left;"> Recommendation Q1 </th>
   <th style="text-align:left;"> Recommendation Q2 </th>
   <th style="text-align:left;"> Recommendation Q3 </th>
   <th style="text-align:left;"> Recommendation Q4 </th>
   <th style="text-align:left;"> Recommendation Q5 </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Number of Responses </td>
   <td style="text-align:left;"> 934 </td>
   <td style="text-align:left;"> 938 </td>
   <td style="text-align:left;"> 928 </td>
   <td style="text-align:left;"> 923 </td>
   <td style="text-align:left;"> 924 </td>
   <td style="text-align:left;"> 935 </td>
   <td style="text-align:left;"> 925 </td>
   <td style="text-align:left;"> 925 </td>
   <td style="text-align:left;"> 923 </td>
   <td style="text-align:left;"> 925 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Average Response </td>
   <td style="text-align:left;"> 5.14 </td>
   <td style="text-align:left;"> 4.83 </td>
   <td style="text-align:left;"> 5.06 </td>
   <td style="text-align:left;"> 5.06 </td>
   <td style="text-align:left;"> 4.78 </td>
   <td style="text-align:left;"> 5.01 </td>
   <td style="text-align:left;"> 4.99 </td>
   <td style="text-align:left;"> 5.04 </td>
   <td style="text-align:left;"> 5.02 </td>
   <td style="text-align:left;"> 4.98 </td>
  </tr>
</tbody>
</table>

<p>All questions’ averages are around 5.  That doesn’t look good for XYZ Corp. (Given that the data was randomly 
generated, though, it makes sense.)</p>

<p><a name="sat"></a>
-[ <strong>satisfaction analysis</strong> ]-</p>

<p>I’ve now separated the satisfaction questions into their own data frame for simplicity.  I’ll come back to the 
recommendation questions later.</p>

<p>To keep this simple, here are the assumed ranges for the satisfaction questions:</p>

<ul>
  <li>9-10 = Satisfied (SAT)</li>
  <li>5-8 = Neutral</li>
  <li>0-4 = Dissatisfied (DSAT)</li>
</ul>

<p>Using these criteria, I’ve determined the percentage of customers who are satisfied, dissatisfied, etc.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## separate satisfaction questions</span><span class="w">
</span><span class="n">sat_num</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">survey_data</span><span class="p">[,</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">]</span><span class="w">

</span><span class="c1">## calculate percentage sAT</span><span class="w">
</span><span class="n">per_sat</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sapply</span><span class="p">(</span><span class="n">sat_num</span><span class="p">,</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">9</span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">num_responses</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">]</span><span class="w">

</span><span class="c1">## calculate percentage neutral</span><span class="w">
</span><span class="n">neutral</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sapply</span><span class="p">(</span><span class="n">sat_num</span><span class="p">,</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">num_responses</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">]</span><span class="w">

</span><span class="c1">## calculate percentage DSAT</span><span class="w">
</span><span class="n">dsat</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sapply</span><span class="p">(</span><span class="n">sat_num</span><span class="p">,</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">4</span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">num_responses</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">]</span><span class="w">

</span><span class="c1">## format percentages</span><span class="w">
</span><span class="n">percent</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">digits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"f"</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">paste0</span><span class="p">(</span><span class="n">formatC</span><span class="p">(</span><span class="m">100</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">format</span><span class="p">,</span><span class="w"> </span><span class="n">digits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">digits</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p">),</span><span class="w"> </span><span class="s2">"%"</span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c1">## combine results</span><span class="w">
</span><span class="n">sat_results</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.data.frame</span><span class="p">(</span><span class="n">rbind</span><span class="p">(</span><span class="n">num_responses</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">],</span><span class="w"> </span><span class="n">sprintf</span><span class="p">(</span><span class="s2">"%.2f"</span><span class="p">,</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="n">avg</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">],</span><span class="w"> </span><span class="m">1</span><span class="p">)),</span><span class="w"> </span><span class="n">percent</span><span class="p">(</span><span class="n">per_sat</span><span class="p">),</span><span class="w"> 
                                   </span><span class="n">percent</span><span class="p">(</span><span class="n">neutral</span><span class="p">),</span><span class="w"> </span><span class="n">percent</span><span class="p">(</span><span class="n">dsat</span><span class="p">)))</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">sat_results</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">names</span><span class="p">(</span><span class="n">sat_num</span><span class="p">)</span><span class="w">
</span><span class="n">row.names</span><span class="p">(</span><span class="n">sat_results</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"n"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Avg. Satisfaction"</span><span class="p">,</span><span class="w"> </span><span class="s2">"SAT %"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Neutral %"</span><span class="p">,</span><span class="w"> </span><span class="s2">"DSAT %"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>This table tells the story:  XYZ Corp. has a problem with customer satisfaction.</p>

<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:left;"> Satisfaction Q1 </th>
   <th style="text-align:left;"> Satisfaction Q2 </th>
   <th style="text-align:left;"> Satisfaction Q3 </th>
   <th style="text-align:left;"> Satisfaction Q4 </th>
   <th style="text-align:left;"> Satisfaction Q5 </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> n </td>
   <td style="text-align:left;"> 934 </td>
   <td style="text-align:left;"> 938 </td>
   <td style="text-align:left;"> 928 </td>
   <td style="text-align:left;"> 923 </td>
   <td style="text-align:left;"> 924 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Avg. Satisfaction </td>
   <td style="text-align:left;"> 5.10 </td>
   <td style="text-align:left;"> 4.80 </td>
   <td style="text-align:left;"> 5.10 </td>
   <td style="text-align:left;"> 5.10 </td>
   <td style="text-align:left;"> 4.80 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> SAT % </td>
   <td style="text-align:left;"> 16.06% </td>
   <td style="text-align:left;"> 15.57% </td>
   <td style="text-align:left;"> 13.90% </td>
   <td style="text-align:left;"> 13.76% </td>
   <td style="text-align:left;"> 14.72% </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Neutral % </td>
   <td style="text-align:left;"> 41.11% </td>
   <td style="text-align:left;"> 35.93% </td>
   <td style="text-align:left;"> 42.03% </td>
   <td style="text-align:left;"> 41.39% </td>
   <td style="text-align:left;"> 36.90% </td>
  </tr>
  <tr>
   <td style="text-align:left;"> DSAT % </td>
   <td style="text-align:left;"> 42.83% </td>
   <td style="text-align:left;"> 48.51% </td>
   <td style="text-align:left;"> 44.07% </td>
   <td style="text-align:left;"> 44.85% </td>
   <td style="text-align:left;"> 48.38% </td>
  </tr>
</tbody>
</table>

<p>I’d like to see something more visual, though.  That is where the <a href="http://jason.bryer.org/likert/">likert package</a> is 
useful.  It removes the need to go through many of the steps above (calculating SAT %, DSAT %, etc.).  It 
also provides a lot of options for visualization that are beyond the scope of what I’m trying to do here.</p>

<p><a href="http://jason.bryer.org/likert/">likert</a> requires a character data frame, so I’ve created one and
filled it with “SAT,” “Neutral,” and “DSAT” based on the above definitions.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## satisfaction classification function</span><span class="w">
</span><span class="n">sat_type</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">is.numeric</span><span class="p">(</span><span class="n">elem</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"> 
    </span><span class="n">ifelse</span><span class="p">(</span><span class="n">elem</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">9</span><span class="p">,</span><span class="w"> </span><span class="s2">"SAT"</span><span class="p">,</span><span class="w"> </span><span class="n">ifelse</span><span class="p">(</span><span class="n">elem</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="s2">"DSAT"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Neutral"</span><span class="p">))</span><span class="w">
  </span><span class="p">}</span><span class="w"> 
  </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">stop</span><span class="p">(</span><span class="s2">"Invalid input.  Please ensure numeric input."</span><span class="p">)</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c1">## apply satisfaction type to sat_num</span><span class="w">
</span><span class="n">sat</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.data.frame</span><span class="p">(</span><span class="n">lapply</span><span class="p">(</span><span class="n">sat_num</span><span class="p">,</span><span class="w"> </span><span class="n">sat_type</span><span class="p">),</span><span class="w"> </span><span class="n">check.names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>To plot this data, I’ve created a likert data element.  I’ve also added the number of responses to each question, so
the plot will contain all relevant data:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## add number of responses to the names of the sat data frame so they will appear on the plot</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">sat</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">lapply</span><span class="p">(</span><span class="nf">seq_along</span><span class="p">(</span><span class="n">sat</span><span class="p">),</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="n">paste0</span><span class="p">(</span><span class="nf">names</span><span class="p">(</span><span class="n">survey_data</span><span class="p">[</span><span class="n">x</span><span class="p">]),</span><span class="w"> </span><span class="s2">" (n = "</span><span class="p">,</span><span class="w"> </span><span class="n">num_responses</span><span class="p">[</span><span class="n">x</span><span class="p">],</span><span class="w"> </span><span class="s2">")"</span><span class="p">))</span><span class="w">

</span><span class="c1">## load the likert package</span><span class="w">
</span><span class="n">require</span><span class="p">(</span><span class="n">likert</span><span class="p">)</span><span class="w">

</span><span class="c1">## create a likert data element</span><span class="w">
</span><span class="n">sat_likert</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">likert</span><span class="p">(</span><span class="n">sat</span><span class="p">,</span><span class="w"> </span><span class="n">nlevels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="w">

</span><span class="c1">## plot sat_likert</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">sat_likert</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="https://s.mylesandmyles.info/img/2017-11-25-survey-analysis/plot-satisfaction-1.png" class="img-responsive" title="plot of chunk plot-satisfaction" alt="plot of chunk plot-satisfaction" style="display: block; margin: auto;" /></p>

<p>That’s a good start, but there are a few things I would like to change:</p>

<ol>
  <li>The questions are not displayed in their original order</li>
  <li>The scale is -100% to 100%; 0% to 100% makes sense for satisfaction</li>
  <li>XYZ Corp. wants to see red/yellow/green for DSAT/Neutral/SAT</li>
</ol>

<p>These can be addressed easily:</p>

<ol>
  <li>Add <code class="highlighter-rouge">group.order = names(sat)</code> to the plot call</li>
  <li>Add <code class="highlighter-rouge">centered = FALSE</code> to the plot call</li>
  <li>Define <code class="highlighter-rouge">low.color</code>, <code class="highlighter-rouge">neutral.color</code>, and <code class="highlighter-rouge">high.color</code> as desired.</li>
</ol>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## plot sat_likert with questions in original order, changing colors to red/yellow/green and making the range</span><span class="w">
</span><span class="c1">## 0%-100%</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">sat_likert</span><span class="p">,</span><span class="w"> </span><span class="n">group.order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">names</span><span class="p">(</span><span class="n">sat</span><span class="p">),</span><span class="w"> </span><span class="n">centered</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="n">low.color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"red"</span><span class="p">,</span><span class="w"> </span><span class="n">neutral.color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"yellow"</span><span class="p">,</span><span class="w"> 
     </span><span class="n">high.color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"green"</span><span class="p">)</span><span class="w">  
</span></code></pre></div></div>

<p><img src="https://s.mylesandmyles.info/img/2017-11-25-survey-analysis/plot-satisfaction-2-1.png" class="img-responsive" title="plot of chunk plot-satisfaction-2" alt="plot of chunk plot-satisfaction-2" style="display: block; margin: auto;" /></p>

<p>That’s much closer to the desired plot.  Average satisfaction is still missing, though.  The easiest way I’ve 
found to add that is annotation. (The likert package extends the functionality of <a href="http://ggplot2.org/">ggplot2</a>, so 
its features are available.)  I’ve already calculated average satisfaction, so annotating the plot with it is
straightforward.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## create avg. satisfaction labels</span><span class="w">
</span><span class="n">avg_sat_label</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">paste0</span><span class="p">(</span><span class="s2">"Avg. Satisfaction = "</span><span class="p">,</span><span class="w"> </span><span class="n">sprintf</span><span class="p">(</span><span class="s2">"%.2f"</span><span class="p">,</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="n">avg</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">],</span><span class="w"> </span><span class="m">1</span><span class="p">)))</span><span class="w">

</span><span class="c1">## plot sat_likert, adding avg. satisfaction labels </span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">sat_likert</span><span class="p">,</span><span class="w"> </span><span class="n">group.order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">names</span><span class="p">(</span><span class="n">sat</span><span class="p">),</span><span class="w"> </span><span class="n">centered</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="n">low.color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"red"</span><span class="p">,</span><span class="w"> </span><span class="n">neutral.color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"yellow"</span><span class="p">,</span><span class="w"> 
     </span><span class="n">high.color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"green"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">50</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg_sat_label</span><span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.75</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">50</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg_sat_label</span><span class="p">[</span><span class="m">2</span><span class="p">],</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.75</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">50</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg_sat_label</span><span class="p">[</span><span class="m">3</span><span class="p">],</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.75</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">50</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg_sat_label</span><span class="p">[</span><span class="m">4</span><span class="p">],</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.75</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">50</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg_sat_label</span><span class="p">[</span><span class="m">5</span><span class="p">],</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.75</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="https://s.mylesandmyles.info/img/2017-11-25-survey-analysis/plot-satisfaction-3-1.png" class="img-responsive" title="plot of chunk plot-satisfaction-3" alt="plot of chunk plot-satisfaction-3" style="display: block; margin: auto;" /></p>

<p>(Note that the x positions of the labels were determined through trial and error and that <code class="highlighter-rouge">y = 50</code> is the 
<em>horizontal</em> center of the plot; if this were a -100% to 100% plot, <code class="highlighter-rouge">y = 0</code> would center the annotation.)</p>

<p>This is very close to the desired plot.  The labels could stand out a little more, though, so I’ve added white
boxes around them.  I’ve also added a centered title to the plot so XYZ Corp.’s management knows exactly
what they are seeing at a glance.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## plot sat_likert, adding boxes around avg. satisfaction labels</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">sat_likert</span><span class="p">,</span><span class="w"> </span><span class="n">group.order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">names</span><span class="p">(</span><span class="n">sat</span><span class="p">),</span><span class="w"> </span><span class="n">centered</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="n">low.color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"red"</span><span class="p">,</span><span class="w"> </span><span class="n">neutral.color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"yellow"</span><span class="p">,</span><span class="w"> 
     </span><span class="n">high.color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"green"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_rect</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">xmin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4.90</span><span class="p">,</span><span class="w"> </span><span class="n">xmax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5.07</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">40</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">60</span><span class="p">),</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#FFFFFF"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">50</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg_sat_label</span><span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.75</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_rect</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">xmin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3.90</span><span class="p">,</span><span class="w"> </span><span class="n">xmax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4.07</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">40</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">60</span><span class="p">),</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#FFFFFF"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">50</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg_sat_label</span><span class="p">[</span><span class="m">2</span><span class="p">],</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.75</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_rect</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">xmin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2.90</span><span class="p">,</span><span class="w"> </span><span class="n">xmax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3.07</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">40</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">60</span><span class="p">),</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#FFFFFF"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">50</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg_sat_label</span><span class="p">[</span><span class="m">3</span><span class="p">],</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.75</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_rect</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">xmin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1.90</span><span class="p">,</span><span class="w"> </span><span class="n">xmax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2.07</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">40</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">60</span><span class="p">),</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#FFFFFF"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">50</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg_sat_label</span><span class="p">[</span><span class="m">4</span><span class="p">],</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.75</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_rect</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">xmin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.90</span><span class="p">,</span><span class="w"> </span><span class="n">xmax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1.07</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">40</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">60</span><span class="p">),</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#FFFFFF"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">50</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg_sat_label</span><span class="p">[</span><span class="m">5</span><span class="p">],</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.75</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">plot.title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">hjust</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Satisfaction with XYZ"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="https://s.mylesandmyles.info/img/2017-11-25-survey-analysis/plot-satisfaction-4-1.png" class="img-responsive" title="plot of chunk plot-satisfaction-4" alt="plot of chunk plot-satisfaction-4" style="display: block; margin: auto;" />
(Again, the size and positions of the boxes were determined through trial and error.)</p>

<p>This looks almost like the desired plot, but I want to see whether the “avg. satisfaction” boxes would look
better at their relative positions on the horizontal axis.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## calculate avg * 10 for positioning as the plot's scale is 0-100 and avg's scale is 0-10</span><span class="w">
</span><span class="n">avg10</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">avg</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">10</span><span class="w">

</span><span class="c1">## plot sat_likert, moving avg. satisfaction boxes to their relative positions</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">sat_likert</span><span class="p">,</span><span class="w"> </span><span class="n">group.order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">names</span><span class="p">(</span><span class="n">sat</span><span class="p">),</span><span class="w"> </span><span class="n">centered</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="n">low.color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"red"</span><span class="p">,</span><span class="w"> </span><span class="n">neutral.color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"yellow"</span><span class="p">,</span><span class="w"> 
     </span><span class="n">high.color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"green"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_rect</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">xmin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4.90</span><span class="p">,</span><span class="w"> </span><span class="n">xmax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5.07</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg10</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg10</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">10</span><span class="p">),</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#FFFFFF"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg10</span><span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg_sat_label</span><span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.75</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_rect</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">xmin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3.90</span><span class="p">,</span><span class="w"> </span><span class="n">xmax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4.07</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg10</span><span class="p">[</span><span class="m">2</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg10</span><span class="p">[</span><span class="m">2</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">10</span><span class="p">),</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#FFFFFF"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg10</span><span class="p">[</span><span class="m">2</span><span class="p">],</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg_sat_label</span><span class="p">[</span><span class="m">2</span><span class="p">],</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.75</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_rect</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">xmin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2.90</span><span class="p">,</span><span class="w"> </span><span class="n">xmax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3.07</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg10</span><span class="p">[</span><span class="m">3</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg10</span><span class="p">[</span><span class="m">3</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">10</span><span class="p">),</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#FFFFFF"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg10</span><span class="p">[</span><span class="m">3</span><span class="p">],</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg_sat_label</span><span class="p">[</span><span class="m">3</span><span class="p">],</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.75</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_rect</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">xmin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1.90</span><span class="p">,</span><span class="w"> </span><span class="n">xmax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2.07</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg10</span><span class="p">[</span><span class="m">4</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg10</span><span class="p">[</span><span class="m">4</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">10</span><span class="p">),</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#FFFFFF"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg10</span><span class="p">[</span><span class="m">4</span><span class="p">],</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg_sat_label</span><span class="p">[</span><span class="m">4</span><span class="p">],</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.75</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_rect</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">xmin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.90</span><span class="p">,</span><span class="w"> </span><span class="n">xmax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1.07</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg10</span><span class="p">[</span><span class="m">5</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg10</span><span class="p">[</span><span class="m">5</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">10</span><span class="p">),</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#FFFFFF"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg10</span><span class="p">[</span><span class="m">5</span><span class="p">],</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">avg_sat_label</span><span class="p">[</span><span class="m">5</span><span class="p">],</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.75</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">plot.title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">hjust</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Satisfaction with XYZ"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="https://s.mylesandmyles.info/img/2017-11-25-survey-analysis/plot-satisfaction-5-1.png" class="img-responsive" title="plot of chunk plot-satisfaction-5" alt="plot of chunk plot-satisfaction-5" style="display: block; margin: auto;" /></p>

<p>While this is closer to the desired plot, I’m undecided as to  whether this looks better than the plot above.  If the 
data were real and not randomly generated (and thus less likely to all be centered around 5), there might be more 
differentiation in the placement of the labels and this might look better.</p>

<p><a name="rec"></a>
-[ <strong>recommendation analysis</strong> ]-</p>

<p>I underwent basically the same process for the recommendation questions.  For those, I’ve used the standard criteria 
for calculating <a href="http://www.medallia.com/net-promoter-score/">Net Promoter Score</a> (NPS):</p>

<ul>
  <li>9-10 = promoters</li>
  <li>7-8 = passives</li>
  <li>0-6 = detractors</li>
</ul>

<p>If one is just looking for NPS (% Promoters - % Detractors), the <a href="https://CRAN.R-project.org/package=NPS">NPS</a> 
package facilitates this, as it calculates NPS without the interim step of calculating % promoters and % 
detractors.</p>

<p>Apparently, <a href="http://businessoverbroadway.com/the-best-likelihood-to-recommend-metric">there is some debate</a> about 
whether the average score or NPS is a better indicator of customers’ likelihood to recommend a brand.  As such, 
I’ve included both here.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## require NPS package and calculate NPS</span><span class="w">
</span><span class="n">require</span><span class="p">(</span><span class="n">NPS</span><span class="p">)</span><span class="w">
</span><span class="n">rec_num</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.data.frame</span><span class="p">(</span><span class="n">survey_data</span><span class="p">[,</span><span class="m">6</span><span class="o">:</span><span class="m">10</span><span class="p">])</span><span class="w">
</span><span class="n">rec_nps</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sapply</span><span class="p">(</span><span class="n">rec_num</span><span class="p">,</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="n">nps</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">x</span><span class="p">)]))</span><span class="w">
</span></code></pre></div></div>

<p>Here are the outputs of the <code class="highlighter-rouge">nps</code> function from the <a href="https://CRAN.R-project.org/package=NPS">NPS</a> 
package for XYZ’s recommendation questions:</p>

<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> x </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Recommendation Q1 </td>
   <td style="text-align:right;"> -0.5283422 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Recommendation Q2 </td>
   <td style="text-align:right;"> -0.4800000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Recommendation Q3 </td>
   <td style="text-align:right;"> -0.4886486 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Recommendation Q4 </td>
   <td style="text-align:right;"> -0.4897075 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Recommendation Q5 </td>
   <td style="text-align:right;"> -0.4951351 </td>
  </tr>
</tbody>
</table>

<p>Since NPS is measured on a scale of -100 to +100, I’ve multiplied by 100.  I’ve also calculated % promoters, % 
passives, and % detractors and put everything into a table, similar to the satisfaction table above because if
there’s one thing that XYZ Corp.’s management values, it’s uniformity.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## multiply NPS * 100</span><span class="w">
</span><span class="n">rec_nps</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sapply</span><span class="p">(</span><span class="n">rec_num</span><span class="p">,</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="n">nps</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">x</span><span class="p">)]))</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">100</span><span class="w">

</span><span class="c1">## calculate percentage promoters</span><span class="w">
</span><span class="n">promoters</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sapply</span><span class="p">(</span><span class="n">rec_num</span><span class="p">,</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">9</span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">num_responses</span><span class="p">[</span><span class="m">6</span><span class="o">:</span><span class="m">10</span><span class="p">]</span><span class="w">

</span><span class="c1">## calculate percentage passives</span><span class="w">
</span><span class="n">passives</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sapply</span><span class="p">(</span><span class="n">rec_num</span><span class="p">,</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">num_responses</span><span class="p">[</span><span class="m">6</span><span class="o">:</span><span class="m">10</span><span class="p">]</span><span class="w">

</span><span class="c1">## calculate percentage promoters</span><span class="w">
</span><span class="n">detractors</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sapply</span><span class="p">(</span><span class="n">rec_num</span><span class="p">,</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">6</span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">num_responses</span><span class="p">[</span><span class="m">6</span><span class="o">:</span><span class="m">10</span><span class="p">]</span><span class="w">

</span><span class="c1">## combine results</span><span class="w">
</span><span class="n">rec_results</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.data.frame</span><span class="p">(</span><span class="n">rbind</span><span class="p">(</span><span class="n">num_responses</span><span class="p">[</span><span class="m">6</span><span class="o">:</span><span class="m">10</span><span class="p">],</span><span class="w"> </span><span class="n">sprintf</span><span class="p">(</span><span class="s2">"%.2f"</span><span class="p">,</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="n">avg</span><span class="p">[</span><span class="m">6</span><span class="o">:</span><span class="m">10</span><span class="p">],</span><span class="w"> </span><span class="m">2</span><span class="p">)),</span><span class="w"> </span><span class="n">sprintf</span><span class="p">(</span><span class="s2">"%.2f"</span><span class="p">,</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="n">rec_nps</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">)),</span><span class="w"> </span><span class="n">percent</span><span class="p">(</span><span class="n">promoters</span><span class="p">),</span><span class="w"> </span><span class="n">percent</span><span class="p">(</span><span class="n">passives</span><span class="p">),</span><span class="w"> </span><span class="n">percent</span><span class="p">(</span><span class="n">detractors</span><span class="p">)))</span><span class="w">
</span></code></pre></div></div>

<p>This table tells the recommendation story.  Wow, XYZ Corp. is in trouble:</p>

<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:left;"> Recommendation Q1 </th>
   <th style="text-align:left;"> Recommendation Q2 </th>
   <th style="text-align:left;"> Recommendation Q3 </th>
   <th style="text-align:left;"> Recommendation Q4 </th>
   <th style="text-align:left;"> Recommendation Q5 </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> n </td>
   <td style="text-align:left;"> 935 </td>
   <td style="text-align:left;"> 925 </td>
   <td style="text-align:left;"> 925 </td>
   <td style="text-align:left;"> 923 </td>
   <td style="text-align:left;"> 925 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Avg. Likelihood to Recommend </td>
   <td style="text-align:left;"> 5.01 </td>
   <td style="text-align:left;"> 4.99 </td>
   <td style="text-align:left;"> 5.04 </td>
   <td style="text-align:left;"> 5.02 </td>
   <td style="text-align:left;"> 4.98 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> NPS </td>
   <td style="text-align:left;"> -52.83 </td>
   <td style="text-align:left;"> -48.00 </td>
   <td style="text-align:left;"> -48.86 </td>
   <td style="text-align:left;"> -48.97 </td>
   <td style="text-align:left;"> -49.51 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> % Promoters </td>
   <td style="text-align:left;"> 13.58% </td>
   <td style="text-align:left;"> 16.22% </td>
   <td style="text-align:left;"> 15.57% </td>
   <td style="text-align:left;"> 15.17% </td>
   <td style="text-align:left;"> 15.03% </td>
  </tr>
  <tr>
   <td style="text-align:left;"> % Passives </td>
   <td style="text-align:left;"> 20.00% </td>
   <td style="text-align:left;"> 19.57% </td>
   <td style="text-align:left;"> 20.00% </td>
   <td style="text-align:left;"> 20.69% </td>
   <td style="text-align:left;"> 20.43% </td>
  </tr>
  <tr>
   <td style="text-align:left;"> % Detractors </td>
   <td style="text-align:left;"> 66.42% </td>
   <td style="text-align:left;"> 64.22% </td>
   <td style="text-align:left;"> 64.43% </td>
   <td style="text-align:left;"> 64.14% </td>
   <td style="text-align:left;"> 64.54% </td>
  </tr>
</tbody>
</table>

<p>I’d also like to see this visually.  I’ve skipped the interim steps and am showing only the final two plots.  To 
differentiate visually from the satisfaction results, these plots use the default colors from the likert package.<br />
Given that the scale of NPS is -100 to +100, I’ve also used the default scale for the plots.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## create recommendation labels including NPS and avg. likelihood to recommend</span><span class="w">
</span><span class="n">rec_label</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">paste0</span><span class="p">(</span><span class="s2">"NPS = "</span><span class="p">,</span><span class="w"> </span><span class="n">sprintf</span><span class="p">(</span><span class="s2">"%.2f"</span><span class="p">,</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="n">rec_nps</span><span class="p">)),</span><span class="w"> </span><span class="s2">"\n"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Avg. = "</span><span class="p">,</span><span class="w"> </span><span class="n">sprintf</span><span class="p">(</span><span class="s2">"%.2f"</span><span class="p">,</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="n">avg</span><span class="p">[</span><span class="m">6</span><span class="o">:</span><span class="m">10</span><span class="p">],</span><span class="w"> </span><span class="m">1</span><span class="p">)))</span><span class="w">

</span><span class="c1">## promoter/detractor function</span><span class="w">
</span><span class="n">rec_type</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">is.numeric</span><span class="p">(</span><span class="n">elem</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"> 
    </span><span class="n">ifelse</span><span class="p">(</span><span class="n">elem</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">9</span><span class="p">,</span><span class="w"> </span><span class="s2">"Promoter"</span><span class="p">,</span><span class="w"> </span><span class="n">ifelse</span><span class="p">(</span><span class="n">elem</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="s2">"Detractor"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Passive"</span><span class="p">))</span><span class="w">
  </span><span class="p">}</span><span class="w"> 
  </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">stop</span><span class="p">(</span><span class="s2">"Invalid input.  Please ensure numeric input."</span><span class="p">)</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c1">## apply recommendation type to rec_num</span><span class="w">
</span><span class="n">rec</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.data.frame</span><span class="p">(</span><span class="n">lapply</span><span class="p">(</span><span class="n">rec_num</span><span class="p">,</span><span class="w"> </span><span class="n">rec_type</span><span class="p">),</span><span class="w"> </span><span class="n">check.names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">

</span><span class="c1">## add number of responses to the names of the sat data frame so they will appear on the plot</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">rec</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">lapply</span><span class="p">(</span><span class="nf">seq_along</span><span class="p">(</span><span class="n">rec</span><span class="p">),</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="n">paste0</span><span class="p">(</span><span class="nf">names</span><span class="p">(</span><span class="n">survey_data</span><span class="p">[</span><span class="n">x</span><span class="p">]),</span><span class="w"> </span><span class="s2">" (n = "</span><span class="p">,</span><span class="w"> </span><span class="n">num_responses</span><span class="p">[</span><span class="n">x</span><span class="p">],</span><span class="w"> </span><span class="s2">")"</span><span class="p">))</span><span class="w">

</span><span class="c1">## create likert element</span><span class="w">
</span><span class="n">rec_likert</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">likert</span><span class="p">(</span><span class="n">rec</span><span class="p">,</span><span class="w"> </span><span class="n">nlevels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="w">

</span><span class="c1">## plot rec_likert</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">rec_likert</span><span class="p">,</span><span class="w"> </span><span class="n">group.order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">names</span><span class="p">(</span><span class="n">rec</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_rect</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">xmin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4.82</span><span class="p">,</span><span class="w"> </span><span class="n">xmax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5.14</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">-10</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">),</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#FFFFFF"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rec_label</span><span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.75</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_rect</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">xmin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3.82</span><span class="p">,</span><span class="w"> </span><span class="n">xmax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4.14</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">-10</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">),</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#FFFFFF"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rec_label</span><span class="p">[</span><span class="m">2</span><span class="p">],</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.75</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_rect</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">xmin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2.82</span><span class="p">,</span><span class="w"> </span><span class="n">xmax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3.14</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">-10</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">),</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#FFFFFF"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rec_label</span><span class="p">[</span><span class="m">3</span><span class="p">],</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.75</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_rect</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">xmin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1.82</span><span class="p">,</span><span class="w"> </span><span class="n">xmax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2.14</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">-10</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">),</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#FFFFFF"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rec_label</span><span class="p">[</span><span class="m">4</span><span class="p">],</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.75</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_rect</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">xmin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.82</span><span class="p">,</span><span class="w"> </span><span class="n">xmax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1.14</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">-10</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">),</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#FFFFFF"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rec_label</span><span class="p">[</span><span class="m">5</span><span class="p">],</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.75</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">plot.title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">hjust</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Likelihood to Recommend XYZ Corp."</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="https://s.mylesandmyles.info/img/2017-11-25-survey-analysis/plot-recommendation-1.png" class="img-responsive" title="plot of chunk plot-recommendation" alt="plot of chunk plot-recommendation" style="display: block; margin: auto;" /></p>

<p>Due to the random nature of the data (centered around the midpoint of the range), the labels cover up the % passives. 
Here’s one more plot, with the labels in their relative (NPS) positions.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## plot rec_likert, moving labels to their relative positions</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">rec_likert</span><span class="p">,</span><span class="w"> </span><span class="n">group.order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">names</span><span class="p">(</span><span class="n">rec</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_rect</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">xmin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4.82</span><span class="p">,</span><span class="w"> </span><span class="n">xmax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5.14</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rec_nps</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rec_nps</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">10</span><span class="p">),</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#FFFFFF"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rec_nps</span><span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rec_label</span><span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.75</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_rect</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">xmin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3.82</span><span class="p">,</span><span class="w"> </span><span class="n">xmax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4.14</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rec_nps</span><span class="p">[</span><span class="m">2</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rec_nps</span><span class="p">[</span><span class="m">2</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">10</span><span class="p">),</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#FFFFFF"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rec_nps</span><span class="p">[</span><span class="m">2</span><span class="p">],</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rec_label</span><span class="p">[</span><span class="m">2</span><span class="p">],</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.75</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_rect</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">xmin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2.82</span><span class="p">,</span><span class="w"> </span><span class="n">xmax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3.14</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rec_nps</span><span class="p">[</span><span class="m">3</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rec_nps</span><span class="p">[</span><span class="m">3</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">10</span><span class="p">),</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#FFFFFF"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rec_nps</span><span class="p">[</span><span class="m">3</span><span class="p">],</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rec_label</span><span class="p">[</span><span class="m">3</span><span class="p">],</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.75</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_rect</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">xmin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1.82</span><span class="p">,</span><span class="w"> </span><span class="n">xmax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2.14</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rec_nps</span><span class="p">[</span><span class="m">4</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rec_nps</span><span class="p">[</span><span class="m">4</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">10</span><span class="p">),</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#FFFFFF"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rec_nps</span><span class="p">[</span><span class="m">4</span><span class="p">],</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rec_label</span><span class="p">[</span><span class="m">4</span><span class="p">],</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.75</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_rect</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">xmin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.82</span><span class="p">,</span><span class="w"> </span><span class="n">xmax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1.14</span><span class="p">,</span><span class="w"> </span><span class="n">ymin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rec_nps</span><span class="p">[</span><span class="m">5</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">ymax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rec_nps</span><span class="p">[</span><span class="m">5</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">10</span><span class="p">),</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#FFFFFF"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rec_nps</span><span class="p">[</span><span class="m">5</span><span class="p">],</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rec_label</span><span class="p">[</span><span class="m">5</span><span class="p">],</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.75</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">plot.title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">hjust</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Likelihood to Recommend XYZ Corp."</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="https://s.mylesandmyles.info/img/2017-11-25-survey-analysis/plot-recommendation 2-1.png" class="img-responsive" title="plot of chunk plot-recommendation 2" alt="plot of chunk plot-recommendation 2" style="display: block; margin: auto;" /></p>

<p>Much better, but bad news for XYZ Corp.’s management.</p>

<p><a name="summary"></a>
-[ <strong>summary</strong> ]-</p>

<p>Numeric survey analysis is relatively straightforward in R, particularly when using the <a href="http://jason.bryer.org/likert/">Likert</a> and <a href="https://CRAN.R-project.org/package=NPS">NPS</a> packages.</p>

<p><a name="comments"></a></p>

					<br />
				</div>
            </div>
				<ul class="pager">
					
					<li class="previous">
						<a class="prev" href="/blog/2017/11/19/lognormality/">&larr; Previous:  "Lognormality (the blog)"</a>
					</li>
					
					<li>
						<a href="https://s.mylesandmyles.info/blog/">Main</a>
					</li>
					
					<li class="next">
						<a class="next" href="/blog/2018/02/03/presenting-data-and-information/">Next:  "Presenting Data and Information Seminar" &rarr;</a>
					</li>
					
				</ul>
			<br />
			<h4 style="text-align:left;">Comments:</h4>
<div id="disqus_thread"></div>
<!-- Add Disqus comments (not comment count) -->
<script type="text/javascript">
    var disqus_shortname  = 'lognormality';
    var disqus_identifier = '/blog/2017/11/25/survey-analysis/';
    var disqus_title      = 'Survey Analysis in R with the Likert and NPS Packages';
    var disqus_url        = 'https://s.mylesandmyles.info//blog/2017/11/25/survey-analysis/';
    // var disqus_developer = 1; // Comment out when the site is live
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

<!-- Add Disqus comment count (not the comments) -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES * * */
  var disqus_shortname  = 'lognormality';
  // var disqus_developer = 1; // Comment out when the site is live
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
      var s = document.createElement('script'); s.async = true;
      s.type = 'text/javascript';
      s.src = '//' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<noscript>
    Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
		</div>
	</section>
	<script id="dsq-count-scr" src="//lognormality.disqus.com/count.js" async></script>
	
        <!-- Footer -->
    <footer class="text-center">
        <div class="footer-above">
            <div class="container">
                <div class="row">
                    <div class="footer-col col-md-4">
                        <h3>Links</h3>
                        <p>
                            <ul>
								<li><p><a href="https://s.mylesandmyles.info/blog/">Lognormality</a> (blog)</p></li>
								<li><p><a href="https://steve.mylesandmyles.info/">MEMORYLESSNESS</a> (tumblr)</p></li>
								<li><p><a href="https://photos.scumdogentertainment.com/">Stochasticity</a> (my photos)</p></li>
								<li><p><a href="https://about.me/stevemyles">about.me</a></p></li>
								<li><p><a href="https://www.researchgate.net/profile/Steven_Myles2">ResearchGate</a></p></li>
							</ul>	
                        </p>
                    </div>
                    <div class="footer-col col-md-4">
                        <h3>Me Elsewhere</h3>
                        <ul class="list-inline">
                            
                            <li>
                                <a href="https://www.linkedin.com/in/stevenmyles" class="btn-social btn-outline"><i class="fa fa-fw fa-linkedin"></i></a>
                            </li>
		                    
                            <li>
                                <a href="https://github.com/scumdogsteev" class="btn-social btn-outline"><i class="fa fa-fw fa-github"></i></a>
                            </li>
		                    
                            <li>
                                <a href="https://www.flickr.com/photos/scumdogsteev/" class="btn-social btn-outline"><i class="fa fa-fw fa-flickr"></i></a>
                            </li>
		                    
                            <li>
                                <a href="https://www.instagram.com/scumdogsteev/" class="btn-social btn-outline"><i class="fa fa-fw fa-instagram"></i></a>
                            </li>
		                    
                            <li>
                                <a href="https://www.youtube.com/user/scumdogsteev" class="btn-social btn-outline"><i class="fa fa-fw fa-youtube"></i></a>
                            </li>
		                    
                            <li>
                                <a href="https://soundcloud.com/scumdogsteev" class="btn-social btn-outline"><i class="fa fa-fw fa-soundcloud"></i></a>
                            </li>
		                    
                            <li>
                                <a href="https://steve.mylesandmyles.info/" class="btn-social btn-outline"><i class="fa fa-fw fa-tumblr"></i></a>
                            </li>
		                    
                            <li>
                                <a href="https://www.last.fm/user/scumdogsteev" class="btn-social btn-outline"><i class="fa fa-fw fa-lastfm"></i></a>
                            </li>
		                    
                        </ul>
                    </div>
                    <div class="footer-col col-md-4">
                        <h3>Credits</h3>
                        <p>Theme = <a href="http://jekyllthemes.org/themes/freelancer/">Freelancer</a> by <a href="https://startbootstrap.com">Start Bootstrap</a>.  Hosting by <a href="https://pages.github.com/">GitHub Pages</a>.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-below">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        Copyright &copy; 1994-2019 <a href="mailto:steve@mylesandmyles.info">Steve Myles</a>. <a href="/license/">Some rights reserved</a>.<br />
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
    <div class="scroll-top page-scroll visible-xs visible-sm">
        <a class="btn btn-primary" href="#page-top">
            <i class="fa fa-chevron-up"></i>
        </a>
    </div>

     <!-- jQuery Version 1.11.0 -->
    <script src="/js/jquery-1.11.0.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="/js/bootstrap.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="/js/jquery.easing.min.js"></script>
    <script src="/js/classie.js"></script>
    <script src="/js/cbpAnimatedHeader.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="/js/freelancer.js"></script>

    <!-- ToggleDiv JavaScript -->
    <script src="/js/toggleDiv.js"></script>
    </body>
</html>
